<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet JS Bubble Shooter</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        integrity="sha512-‚Ä¶ (v√©rifier sur CDNJS) ‚Ä¶" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

    <!-- LE LOADER -->
    <div id="loader-screen" class="screen active">
        <div class="loader-content">
            <h1 class="loader-title">Bubble Shooter</h1>
            <div class="bubble-loader">
                <div class="bubble-item bubble-1"></div>
                <div class="bubble-item bubble-2"></div>
                <div class="bubble-item bubble-3"></div>
                <div class="bubble-item bubble-4"></div>
            </div>
            <p class="loader-text">Chargement en cours...</p>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- LANDING PAGE -->
    <div id="landing-page" class="screen hidden menu-layout">

        <!-- Gauche CLASSEMENT SIMUL√â -->
        <div id="leaderboard" class="panel panel-left slide-in-left">
            <h2 id="leaderboard-title"><i class="fa-solid fa-ranking-star"></i>MES SCORES</h2>
            <table>
                <thead id="leaderboard-header">
                    <tr>
                        <th>Rang</th>
                        <th>Pseudo</th>
                        <th>Score</th>
                        <th>Temps</th>
                    </tr>
                </thead>
                <tbody id="landing-leaderboard-body">
                    <!-- lignes g√©n√©r√©es en JS -->
                </tbody>
            </table>

        </div>

        <!-- milieu ZONE PRINCIPALE ET BOUTONS -->
        <div id="main-center">
            <h1 class="game-logo pulse-animation">Bubble Shooter</h1>
            <p class="slogan">Visez. Tirez. Explosez.</p>

            <div id="main-buttons">
                <!-- PSEUDO -->
                <div id="player-box" style="margin-top:16px;">
                    <input id="player-input" type="text" placeholder="Ton pseudo‚Ä¶" maxlength="16" style="
        padding:12px 16px;
        border-radius:16px;
        border:none;
        outline:none;
        width:240px;
        text-align:center;
        font-family: 'Montserrat', sans-serif;
      " />

                    <div style="margin-top:10px;">
                        <button id="player-save" class="btn-primary" style="padding:10px 18px;">
                            OK
                        </button>
                        <button id="player-change" class="btn-secondary hidden" style="padding:10px 18px;">
                            Changer
                        </button>
                    </div>

                    <div id="player-hello" style="margin-top:10px; color:white; opacity:0.85;"></div>
                </div>

                <!-- BOUTON JOUER (cach√© tant que pseudo pas valid√©) -->
                <button id="start-button" class="btn-primary hidden" style="margin-top:14px;">
                    <span class="btn-icon">‚ñ∂</span> JOUER
                </button>

                <!-- R√àGLES toujours visibles -->
                <button id="rules-button" class="btn-secondary" style="margin-top:10px;">
                    <span class="btn-icon"><i class="fa-solid fa-list"></i></span> R√àGLES DU JEU
                </button>
            </div>

        </div>

        <!-- Droite R√àGLES DU JEU -->
        <div id="rules-menu" class="panel panel-right slide-in-right">

            <div class="menu-block rules-block">
                <h3>M√âCANIQUES CL√âS</h3>

                <h4>Match-3</h4>
                <div class="rule-example">
                    <span class="bubble-example red pulse"></span>
                    <span class="bubble-example red pulse"></span>
                    <span class="bubble-example red pulse"></span>
                </div>
                <p>√âclate si vous connectez 3 bulles ou plus de la m√™me couleur.</p>

                <h4>Rebonds</h4>
                <p>La balle rebondit sur les murs lat√©raux pour atteindre les zones difficiles.</p>

                <p class="points">Score: 10 points pour une explosion standard. Bonus pour les chutes !</p>
            </div>
        </div>
    </div>

    <!-- CONTENEUR PRINCIPAL DU JEU -->
    <div id="game-screen" class="screen hidden">
        <div id="game-header">
            <div id="game-info">
                <div class="info-item">
                    <span class="info-label">Score</span>
                    <span id="score-display" class="info-value">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label"><i class="fa-solid fa-clock" style="color: #ffffff;"></i>Temps</span>
                    <span id="time-display" class="info-value">0:00</span>
                </div>
                <div class="info-item">
                    <button id="pause-button" class="icon-button"><i class="fa-solid fa-pause"
                            style="color: #ffffff;"></i></button>
                    <button id="back-to-menu" class="icon-button"><i class="fa-solid fa-house"
                            style="color: #ffffff;"></i></button>
                </div>
            </div>
        </div>

        <!-- LEVEL INTRO LOADER -->
        <div id="level-intro" class="screen hidden">
            <div class="loader-level-content">
                <h1 class="loader-level-title" id="level-intro-title">Niveau 1</h1>

                <div class="bubble-loader">
                    <div class="bubble-item bubble-1"></div>
                    <div class="bubble-item bubble-2"></div>
                    <div class="bubble-item bubble-3"></div>
                    <div class="bubble-item bubble-4"></div>
                </div>

                <p class="loader-text" id="level-intro-subtitle">Pr√©pare-toi...</p>

                <div class="progress-bar">
                    <div class="progress-fill" id="level-intro-progress"></div>
                </div>
            </div>
        </div>

        <!-- Canvas o√π le jeu sera dessin√© -->
        <div id="canvas-container">
            <canvas id="gameCanvas" width="700" height="500"></canvas>
            <div id="aim-indicator"></div>
        </div>

        <!-- Zone de choix de couleur -->
        <div id="color-palette">
            <div class="palette-section">
                <h3>Balle actuelle :</h3>
                <div id="current-ball-display" class="ball-display">
                    <div id="current-ball" class="color-ball" style="background-color: #ff4d4d;"></div>
                </div>
            </div>

            <div class="palette-section">
                <h3>Prochaine balle :</h3>
                <div id="next-ball-display" class="ball-display">
                    <div id="next-ball" class="color-ball" style="background-color: #4d94ff;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- POPUP R√àGLES -->
    <div id="rules-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <button class="modal-close" id="close-rules-modal">‚úï</button>
            <h2 class="modal-title">R√àGLES DU JEU</h2>

            <div class="rules-section">
                <div class="rule-item">
                    <div class="rule-icon"><i class="fa-solid fa-bullseye fa-bounce" style="color: #ffffff;"></i></div>
                    <div class="rule-text">
                        <h3>Objectif</h3>
                        <p>√âclater toutes les bulles du plateau pour gagner !</p>
                    </div>
                </div>

                <div class="rule-item">
                    <div class="rule-icon"><i class="fa-regular fa-circle-check fa-bounce" style="color: #ffffff;"></i>
                    </div>
                    <div class="rule-text">
                        <h3>Match-3</h3>
                        <p>Connectez 3 bulles ou plus de la m√™me couleur pour les faire exploser</p>
                        <div class="rule-demo">
                            <span class="demo-bubble" style="background: #ff4d4d;"></span>
                            <span class="demo-bubble" style="background: #ff4d4d;"></span>
                            <span class="demo-bubble" style="background: #ff4d4d;"></span>
                            <span class="demo-text">Boom!</span>
                        </div>
                    </div>
                </div>

                <div class="rule-item">
                    <div class="rule-icon"><i class="fa-solid fa-rotate-left fa-bounce" style="color: #ffffff;"></i>
                    </div>
                    <div class="rule-text">
                        <h3>Rebonds</h3>
                        <p>Les bulles rebondissent sur les murs lat√©raux pour atteindre les zones difficiles</p>
                    </div>
                </div>

                <div class="rule-item">
                    <div class="rule-icon"><i class="fa-solid fa-coins fa-bounce" style="color: #ffffff;"></i></div>
                    <div class="rule-text">
                        <h3>Points</h3>
                        <p><strong>10 points</strong> pour une explosion standard</p>
                        <p><strong>Bonus</strong> pour les bulles qui tombent en cascade !</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div id="gameover-modal" class="modal hidden">
        <div class="modal-overlay"></div>

        <div class="modal-content" style="max-width: 720px;">
            <h2 class="modal-title">üí• Game Over</h2>
            <p style="text-align:center; margin-top: 8px; color:#ffffff">
                Les bulles ont atteint la ligne limite.
            </p>

            <!-- R√©sum√© joueur -->
            <p style="text-align:center; margin-top:10px; color:#ffffff;">
                Joueur : <strong id="gameover-player" style="color:#ffffff;">Joueur</strong>
                <br />
                Score : <strong id="gameover-score" style="color:#ffffff;">0</strong>
                <br />
                Temps : <strong id="gameover-time" style="color:#ffffff;">0:00</strong>
                <br />
                Rang : <strong id="gameover-rank" style="color:#ffffff;">#?</strong>
            </p>

            <!-- Leaderboard -->
            <div style="margin-top:14px;">
                <h3 style="margin:0 0 10px 0; text-align:center; color:#ffffff; opacity:0.9;">Classement</h3>

                <div style="max-height: 260px; overflow:auto; border-radius: 14px;">
                    <table style="width:100%; border-collapse: collapse;">
                        <thead>
                            <tr>
                                <th style="text-align:left; padding:10px 12px; color:#ffffff; opacity:0.8;">Rang</th>
                                <th style="text-align:left; padding:10px 12px; color:#ffffff; opacity:0.8;">Pseudo</th>
                                <th style="text-align:right; padding:10px 12px; color:#ffffff; opacity:0.8;">Score</th>
                                <th style="text-align:right; padding:10px 12px; color:#ffffff; opacity:0.8;">Temps</th>
                            </tr>
                        </thead>
                        <tbody id="gameover-leaderboard-body"></tbody>
                    </table>
                </div>
            </div>

            <div style="display:flex; gap:12px; justify-content:center; margin-top:18px; flex-wrap:wrap;">
                <button id="restart-game" class="modal-button">
                    üîÅ Rejouer ce niveau
                </button>

                <button id="restart-from-beginning" class="modal-button" style="opacity:0.95;">
                    üèÅ Depuis le d√©but
                </button>

                <button id="quit-game" class="modal-button" style="opacity:0.9;">
                    üè† Quitter
                </button>
            </div>
        </div>
    </div>


    <div id="win-modal" class="modal hidden">
        <div class="modal-overlay"></div>

        <div class="modal-content" style="max-width: 720px;">
            <h2 class="modal-title">üèÜ Victoire !</h2>

            <p style="text-align:center; margin-top:10px; color:#ffffff;">
                Bravo <strong id="win-player" style="color:#ffffff;">Joueur</strong> ‚ú®
                <br />
                Score : <strong id="win-score" style="color:#ffffff;">0</strong>
                <br />
                Temps : <strong id="win-time" style="color:#ffffff;">0:00</strong>
                <br />
                Rang : <strong id="win-rank" style="color:#ffffff;">#?</strong>
            </p>

            <div style="margin-top:14px;">
                <h3 style="margin:0 0 10px 0; text-align:center; color:#ffffff; opacity:0.9;">Classement</h3>

                <div style="max-height: 260px; overflow:auto; border-radius: 14px;">
                    <table style="width:100%; border-collapse: collapse;">
                        <thead>
                            <tr>
                                <th style="text-align:left; padding:10px 12px; color:#ffffff; opacity:0.8;">Rang</th>
                                <th style="text-align:left; padding:10px 12px; color:#ffffff; opacity:0.8;">Pseudo</th>
                                <th style="text-align:right; padding:10px 12px; color:#ffffff; opacity:0.8;">Score</th>
                                <th style="text-align:right; padding:10px 12px; color:#ffffff; opacity:0.8;">Temps</th>
                            </tr>
                        </thead>
                        <tbody id="win-leaderboard-body"></tbody>
                    </table>
                </div>
            </div>

            <div style="display:flex; gap:12px; justify-content:center; margin-top:18px; flex-wrap:wrap;">
                <button id="win-restart" class="modal-button">üîÅ Rejouer</button>
                <button id="win-quit" class="modal-button" style="opacity:0.9;">üè† Quitter</button>
            </div>
        </div>
    </div>

    <!-- Level complete animation overlay (hidden by default) -->
    <div id="level-complete-overlay" class="level-complete hidden" aria-hidden="true">
      <div class="level-complete-inner">
        <div class="badge">Niveau termin√© !</div>
        <div class="level-sub">Pr√©parez-vous pour l'√©tape suivante</div>
        <div class="confetti-container" aria-hidden="true">
          <span class="confetti c1"></span>
          <span class="confetti c2"></span>
          <span class="confetti c3"></span>
          <span class="confetti c4"></span>
          <span class="confetti c5"></span>
          <span class="confetti c6"></span>
          <span class="confetti c7"></span>
          <span class="confetti c8"></span>
        </div>
      </div>
    </div>

    <script type="module" src="script.js"></script>
</body>

</html>